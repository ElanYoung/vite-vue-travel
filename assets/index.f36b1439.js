var m=Object.defineProperty;var c=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var d=(a,e,t)=>e in a?m(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,_=(a,e)=>{for(var t in e||(e={}))f.call(e,t)&&d(a,t,e[t]);if(c)for(var t of c(e))y.call(e,t)&&d(a,t,e[t]);return a};import{m as v,n as s}from"./index.7248d6ab.js";import{b as h,g as l,n as g,S as p,P as w}from"./swiper.4e9cfd53.js";import{_ as b,a as C,b as $}from"./index.f42fce4b.js";import{g as r}from"./request.3ad38065.js";const E=()=>{const e="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=n5YwEz2K8mW1phA7gxVWmQlXbXfZu1sl&callback=onMapCallback";return new Promise((t,n)=>{typeof window.BMapGL!="undefined"&&t(window.BMapGL),window.onMapCallback=()=>{t(window.BMapGL)};const i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",e),i.onerror=n,document.body.appendChild(i)})},k=()=>E().then(a=>new Promise(e=>{new a.Geolocation().getCurrentPosition(n=>{if(n&&n.address&&n.address.city){const i=n.address.city;e(i.slice(0,i.length-1))}})}));const x={name:"HomeHeader",data(){return{}},computed:_({},v(["city"])),mounted(){this.initCurrentCity()},methods:{initCurrentCity(){k().then(a=>{this.$store.commit("city/change",{city:a})})}}};var M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[e._m(0),e._m(1),t("router-link",{attrs:{to:"/city"}},[t("div",{staticClass:"header__right"},[t("span",[e._v(e._s(e.city.currentCity))]),t("span",{staticClass:"iconfont icontriangledownfill header__right__arrow-icon"})])])],1)},S=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"header__left"},[e("div",{staticClass:"iconfont iconhome header__left__home-icon"})])},function(){var a=this,e=a._self._c;return e("div",{staticClass:"header__input"},[e("span",{staticClass:"iconfont iconsearch"}),e("span",{staticClass:"header__input__placeholder"},[a._v("\u8F93\u5165\u57CE\u5E02/\u666F\u70B9/\u6E38\u73A9\u4E3B\u9898")])])}],T=s(x,M,S,!1,null,"2efa85e1",null,null);const L=T.exports;function u(){return u=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},u.apply(this,arguments)}var O={run:function(){var e=this,t=e.slides.eq(e.activeIndex),n=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(n=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=g(function(){var i;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),i=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(i=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(i=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),i=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(i=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(i=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||i===!1)&&e.autoplay.run()},n)},start:function(){var e=this;return typeof e.autoplay.timeout!="undefined"||e.autoplay.running?!1:(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0)},stop:function(){var e=this;return!e.autoplay.running||typeof e.autoplay.timeout=="undefined"?!1:(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0)},pause:function(e){var t=this;!t.autoplay.running||t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,e===0||!t.params.autoplay.waitForTransition?(t.autoplay.paused=!1,t.autoplay.run()):["transitionend","webkitTransitionEnd"].forEach(function(n){t.$wrapperEl[0].addEventListener(n,t.autoplay.onTransitionEnd)}))},onVisibilityChange:function(){var e=this,t=l();t.visibilityState==="hidden"&&e.autoplay.running&&e.autoplay.pause(),t.visibilityState==="visible"&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;!t||t.destroyed||!t.$wrapperEl||e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(function(n){t.$wrapperEl[0].removeEventListener(n,t.autoplay.onTransitionEnd)}),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach(function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)})},onMouseLeave:function(){var e=this;e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,e.autoplay.run())},attachMouseEvents:function(){var e=this;e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",e.autoplay.onMouseEnter),e.$el.on("mouseleave",e.autoplay.onMouseLeave))},detachMouseEvents:function(){var e=this;e.$el.off("mouseenter",e.autoplay.onMouseEnter),e.$el.off("mouseleave",e.autoplay.onMouseLeave)}};const H={name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){var e=this;h(e,{autoplay:u({},O,{running:!1,paused:!1})})},on:{init:function(e){if(e.params.autoplay.enabled){e.autoplay.start();var t=l();t.addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents()}},beforeTransitionStart:function(e,t,n){e.autoplay.running&&(n||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop();var t=l();t.removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}};p.use([w,H]);const D={name:"HomeSwiper",components:{},props:{banners:{type:Array,default:()=>[]}},data(){return{}},computed:{showSwiper(){return this.banners&&this.banners.length>0}},mounted(){},methods:{initSwiper(){this.swiper=new p(".swiper-container",{pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0})}}};var F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e.showSwiper?t("div",{staticClass:"swiper-container"},[t("div",{staticClass:"swiper-wrapper"},e._l(e.banners,function(n){return t("div",{key:n.id,staticClass:"swiper-slide"},[t("img",{staticClass:"swiper-image",attrs:{src:n.url}})])}),0),t("div",{staticClass:"swiper-pagination"})]):e._e()])},R=[],A=s(D,F,R,!1,null,"202df884",null,null);const G=A.exports;const I={name:"CategoryGrid",props:{categories:{type:Array,default:()=>[]}},data(){return{}},computed:{pages(){const a=[];return this.categories.forEach((e,t)=>{const n=Math.floor(t/8);a[n]||(a[n]=[]),a[n].push(e)}),a},showSwiper(){return this.categories&&this.categories.length>0}},mounted(){},methods:{initSwiper(){this.swiper=new p(".swiper-container",{loop:!1,autoplay:!1})}}};var P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e.showSwiper?t("div",{staticClass:"swiper-container"},[t("div",{staticClass:"swiper-wrapper"},e._l(e.pages,function(n,i){return t("div",{key:i,staticClass:"swiper-slide"},[t(b,{attrs:{"column-num":4,border:!1,"icon-size":"40px",clickable:""}},e._l(n,function(o){return t(C,{key:o.id,attrs:{icon:o.url,text:o.title}})}),1)],1)}),0)]):e._e()])},W=[],N=s(I,P,W,!1,null,"f40c6689",null,null);const V=N.exports;const z={name:"HomeRecommend",props:{recommends:{type:Array,default:()=>[]}},data(){return{}}};var B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"recommend-title"},[e._v("\u70ED\u9500\u63A8\u8350")]),t("ul",e._l(e.recommends,function(n){return t("router-link",{key:n.id,staticClass:"recommend-item border-bottom",attrs:{tag:"li",to:`/detail/${n.id}`}},[t("img",{staticClass:"recommend-item__image",attrs:{src:n.url}}),t("div",{staticClass:"recommend-item__info"},[t("p",{staticClass:"recommend-item__info__title"},[e._v(e._s(n.title))]),t("p",{staticClass:"recommend-item__info__description"},[e._v(e._s(n.description))]),t($,{staticClass:"recommend-item__info__button",attrs:{color:"#ff9300",size:"mini"}},[e._v("\u67E5\u770B\u8BE6\u60C5")])],1)])}),1)])},j=[],X=s(z,B,j,!1,null,"277dab1b",null,null);const q=X.exports;const K={name:"HomeWeekend",props:{weekends:{type:Array,default:()=>[]}},data(){return{}}};var Q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"weekend-title"},[e._v("\u5468\u672B\u53BB\u54EA\u513F")]),t("ul",e._l(e.weekends,function(n){return t("li",{key:n.id,staticClass:"weekend-item border-bottom"},[t("div",{staticClass:"weekend-item__image-wrapper"},[t("img",{staticClass:"weekend-item__image",attrs:{src:n.url}})]),t("div",{staticClass:"weekend-item__info"},[t("p",{staticClass:"weekend-item__info__title"},[e._v(e._s(n.title))]),t("p",{staticClass:"weekend-item__info__description"},[e._v(e._s(n.description))])])])}),0)])},Y=[],Z=s(K,Q,Y,!1,null,"31b40b74",null,null);const J=Z.exports;const U={components:{HomeHeader:L,HomeSwiper:G,HomeCategoryGrid:V,HomeRecommend:q,HomeWeekend:J},data(){return{banners:[],categories:[],recommends:[],weekends:[]}},created(){this.initHomeData()},activated(){},methods:{initHomeData(){this.initSwiperData(),this.initGridData(),this.initRecommendData(),this.initWeekendData()},initSwiperData(){r("/banner/list").then(a=>{a.code===200&&(this.banners=a.data,this.$nextTick(()=>{this.$refs["banner-swiper"].initSwiper()}))})},initGridData(){r("/category/list").then(a=>{a.code===200&&(this.categories=a.data,this.$nextTick(()=>{this.$refs["grid-swiper"].initSwiper()}))})},initRecommendData(){r("/recommend/list").then(a=>{a.code===200&&(this.recommends=a.data)})},initWeekendData(){r("/weekend/list").then(a=>{a.code===200&&(this.weekends=a.data)})}}};var ee=function(){var e=this,t=e._self._c;return t("div",[t("home-header"),t("home-swiper",{ref:"banner-swiper",attrs:{banners:e.banners}}),t("home-category-grid",{ref:"grid-swiper",attrs:{categories:e.categories}}),t("home-recommend",{attrs:{recommends:e.recommends}}),t("home-weekend",{attrs:{weekends:e.weekends}})],1)},te=[],ae=s(U,ee,te,!1,null,"592a4276",null,null);const le=ae.exports;export{le as default};
